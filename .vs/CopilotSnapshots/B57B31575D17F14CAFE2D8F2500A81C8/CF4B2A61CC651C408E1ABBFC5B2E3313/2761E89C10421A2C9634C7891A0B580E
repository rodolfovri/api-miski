using Microsoft.AspNetCore.Http;

namespace Miski.Shared.DTOs.Compras;

public class NegociacionDto
{
    public int IdNegociacion { get; set; }
    public int IdComisionista { get; set; }
    public string NroDocumentoProveedor { get; set; } = string.Empty;
    public int? IdVariedadProducto { get; set; }  // CAMBIADO de IdProducto a IdVariedadProducto
    public string TipoCalidad { get; set; } = string.Empty;
    public decimal? PrecioUnitario { get; set; }
    public int? SacosTotales { get; set; }
    public decimal? PesoPorSaco { get; set; }
    public decimal? PesoTotal { get; set; }
    public decimal? MontoAdelanto { get; set; }
    public DateTime? FAdelanto { get; set; }
    public decimal? MontoTotalPago { get; set; }
    public DateTime? FPagoTotal { get; set; }
    public string? NroCuentaBancaria { get; set; }
    public string FotoDniFrontal { get; set; } = string.Empty;
    public string FotoDniPosterior { get; set; } = string.Empty;
    public string PrimeraEvidenciaFoto { get; set; } = string.Empty;
    public string SegundaEvidenciaFoto { get; set; } = string.Empty;
    public string TerceraEvidenciaFoto { get; set; } = string.Empty;
    public string EvidenciaVideo { get; set; } = string.Empty;
    public string? Estado { get; set; }
    public string? EstadoAprobacionIngeniero { get; set; }
    public string? EstadoAprobacionContadora { get; set; }
    public int? AprobadaPorIngeniero { get; set; }
    public int? AprobadaPorContadora { get; set; }
    public int? RechazadoPorIngeniero { get; set; }
    public int? RechazadoPorContadora { get; set; }
    public DateTime? FAprobacionIngeniero { get; set; }
    public DateTime? FAprobacionContadora { get; set; }
    public DateTime? FRechazoIngeniero { get; set; }
    public DateTime? FRechazoContadora { get; set; }
    public DateTime FRegistro { get; set; }
    public string? Observacion { get; set; }
    
    // Información adicional
    public string? ProveedorNombre { get; set; }
    public string? ComisionistaNombre { get; set; }
    public string? VariedadProductoNombre { get; set; }  // CAMBIADO de ProductoNombre
    public string? ProductoNombre { get; set; }  // Nombre del producto base
    public string? AprobadaPorIngenieroNombre { get; set; }
    public string? AprobadaPorContadoraNombre { get; set; }
}

// DTO para crear negociación - PRIMERA ETAPA
public class CreateNegociacionDto
{
    public int IdComisionista { get; set; }
    public int? IdVariedadProducto { get; set; }  // CAMBIADO de IdProducto a IdVariedadProducto
    public int? SacosTotales { get; set; }
    public string TipoCalidad { get; set; } = string.Empty;
    public decimal? PrecioUnitario { get; set; }
    // Estado se asigna automáticamente como 'EN PROCESO'
}

// DTO para completar negociación - SEGUNDA ETAPA
public class CompletarNegociacionDto
{
    public int IdNegociacion { get; set; }
    public string NroDocumentoProveedor { get; set; } = string.Empty;
    public string NroCuentaBancaria { get; set; } = string.Empty;
    
    // Fotos y video (obligatorias)
    public IFormFile FotoDniFrontal { get; set; } = null!;
    public IFormFile FotoDniPosterior { get; set; } = null!;
    public IFormFile PrimeraEvidenciaFoto { get; set; } = null!;
    public IFormFile SegundaEvidenciaFoto { get; set; } = null!;
    public IFormFile TerceraEvidenciaFoto { get; set; } = null!;
    public IFormFile EvidenciaVideo { get; set; } = null!;
}

public class UpdateNegociacionDto
{
    public int IdNegociacion { get; set; }
    public string NroDocumentoProveedor { get; set; } = string.Empty;
    public int? IdVariedadProducto { get; set; }  // CAMBIADO de IdProducto a IdVariedadProducto
    public string TipoCalidad { get; set; } = string.Empty;
    public decimal? PrecioUnitario { get; set; }
    public int? SacosTotales { get; set; }
    public decimal? PesoPorSaco { get; set; }
    public decimal? PesoTotal { get; set; }
    public decimal? MontoAdelanto { get; set; }
    public DateTime? FAdelanto { get; set; }
    public decimal? MontoTotalPago { get; set; }
    public DateTime? FPagoTotal { get; set; }
    public string? NroCuentaBancaria { get; set; }
    
    // Para actualizar las fotos (opcional)
    public IFormFile? FotoDniFrontal { get; set; }
    public IFormFile? FotoDniPosterior { get; set; }
    public IFormFile? PrimeraEvindenciaFoto { get; set; }
    public IFormFile? SegundaEvindenciaFoto { get; set; }
    public IFormFile? TerceraEvindenciaFoto { get; set; }
    public IFormFile? EvidenciaVideo { get; set; }
    
    public string? Observacion { get; set; }
}

// DTO para aprobar negociación por Ingeniero
public class AprobarNegociacionIngenieroDto
{
    public int IdNegociacion { get; set; }
    public int AprobadaPorIngeniero { get; set; }
}

// DTO para rechazar negociación por Ingeniero
public class RechazarNegociacionIngenieroDto
{
    public int IdNegociacion { get; set; }
    public int RechazadoPorIngeniero { get; set; }
}

// DTO para aprobar negociación por Contadora - SEGUNDA ETAPA
public class AprobarNegociacionContadoraDto
{
    public int IdNegociacion { get; set; }
    public int AprobadaPorContadora { get; set; }
}

// DTO para rechazar negociación por Contadora - SEGUNDA ETAPA
public class RechazarNegociacionContadoraDto
{
    public int IdNegociacion { get; set; }
    public int RechazadoPorContadora { get; set; }
}
