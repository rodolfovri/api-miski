using Microsoft.AspNetCore.Http;

namespace Miski.Shared.DTOs.Compras;

public class NegociacionDto
{
    public int IdNegociacion { get; set; }
    public int IdComisionista { get; set; }
    public string NroDocumentoProveedor { get; set; } = string.Empty;
    public int? IdProducto { get; set; }
    public string TipoCalidad { get; set; } = string.Empty;
    public decimal? PrecioUnitario { get; set; }
    public int? SacosTotales { get; set; }
    public decimal? PesoPorSaco { get; set; }
    public decimal? PesoTotal { get; set; }
    public decimal? MontoAdelanto { get; set; }
    public DateTime? FAdelanto { get; set; }
    public decimal? MontoTotalPago { get; set; }
    public DateTime? FPagoTotal { get; set; }
    public string? NroCuentaBancaria { get; set; }
    public string FotoDniFrontal { get; set; } = string.Empty;
    public string FotoDniPosterior { get; set; } = string.Empty;
    public string PrimeraEvindenciaFoto { get; set; } = string.Empty;
    public string SegundaEvindenciaFoto { get; set; } = string.Empty;
    public string TerceraEvindenciaFoto { get; set; } = string.Empty;
    public string EvidenciaVideo { get; set; } = string.Empty;
    public string? Estado { get; set; }
    public string? EstadoAprobacionIngeniero { get; set; }
    public string? EstadoAprobacionContadora { get; set; }
    public int? AprobadaPorIngeniero { get; set; }
    public int? AprobadaPorContadora { get; set; }
    public int? RechazadoPorIngeniero { get; set; }
    public int? RechazadoPorContadora { get; set; }
    public DateTime? FAprobacionIngeniero { get; set; }
    public DateTime? FAprobacionContadora { get; set; }
    public DateTime? FRechazoIngeniero { get; set; }
    public DateTime? FRechazoContadora { get; set; }
    public DateTime FRegistro { get; set; }
    public string? Observacion { get; set; }
    
    // Información adicional
    public string? ProveedorNombre { get; set; }
    public string? ComisionistaNombre { get; set; }
    public string? ProductoNombre { get; set; }
    public string? AprobadaPorIngenieroNombre { get; set; }
    public string? AprobadaPorContadoraNombre { get; set; }
}

// DTO para crear negociación - PRIMERA ETAPA
public class CreateNegociacionDto
{
    public int IdComisionista { get; set; }
    public int? SacosTotales { get; set; }
    public string TipoCalidad { get; set; } = string.Empty;
    public decimal? PrecioUnitario { get; set; }
    // Estado se asigna automáticamente como 'EN PROCESO'
}

public class UpdateNegociacionDto
{
    public int IdNegociacion { get; set; }
    public string NroDocumentoProveedor { get; set; } = string.Empty;
    public int? IdProducto { get; set; }
    public string TipoCalidad { get; set; } = string.Empty;
    public decimal? PrecioUnitario { get; set; }
    public int? SacosTotales { get; set; }
    public decimal? PesoPorSaco { get; set; }
    public decimal? PesoTotal { get; set; }
    public decimal? MontoAdelanto { get; set; }
    public DateTime? FAdelanto { get; set; }
    public decimal? MontoTotalPago { get; set; }
    public DateTime? FPagoTotal { get; set; }
    public string? NroCuentaBancaria { get; set; }
    
    // Para actualizar las fotos (opcional)
    public IFormFile? FotoDniFrontal { get; set; }
    public IFormFile? FotoDniPosterior { get; set; }
    public IFormFile? PrimeraEvindenciaFoto { get; set; }
    public IFormFile? SegundaEvindenciaFoto { get; set; }
    public IFormFile? TerceraEvindenciaFoto { get; set; }
    public IFormFile? EvidenciaVideo { get; set; }
    
    public string? Observacion { get; set; }
}

// DTO para aprobar negociación por Ingeniero
public class AprobarNegociacionIngenieroDto
{
    public int IdNegociacion { get; set; }
    public int AprobadaPorIngeniero { get; set; }
    public string? Observacion { get; set; }
}

// DTO para rechazar negociación por Ingeniero
public class RechazarNegociacionIngenieroDto
{
    public int IdNegociacion { get; set; }
    public int RechazadoPorIngeniero { get; set; }
    public string? Observacion { get; set; }
}
